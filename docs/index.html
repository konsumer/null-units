<html>
  <head>
    <title>null-units</title>
    <link rel="icon" type="image/x-icon" href="https://avatars.githubusercontent.com/u/10213618" />
  </head>
  <body>
    <canvas id="oscope"></canvas>
  </body>
<script type="module">
import NullUnitContext from './NullUnit.js'


// follows audio API: https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Using_Web_Audio_API

const audioCtx = new NullUnitContext()

const scope = audioCtx.createOscilloscope()
scope.canvas = document.getElementById('oscope')
scope.start()

// const oscillator = audioCtx.createOscillator()
// oscillator.type = "sine"
// oscillator.frequency.setValueAtTime(100, audioCtx.currentTime)
// oscillator.connect(audioCtx.destination)
// oscillator.connect(scope.destination)
// oscillator.start()

const wavetable = await audioCtx.createUnit('units/wavetable.wasm')
wavetable.connect(audioCtx.destination)
wavetable.connect(scope.destination)
wavetable.note.setValueAtTime(60, audioCtx.currentTime)

</script>
</html>
